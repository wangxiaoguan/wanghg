<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>电子签名</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        canvas {
            display: block;
            /* margin:50px auto; */
            border: 1px solid darkgoldenrod;
            box-sizing: border-box;
            position: absolute;
            top: 0;
            left: 0;
            /* width:100%;
            height:100%; */
        }

        #box {
            width: 100%;
            height: 502px;
            background: #fff;
            position: relative;
            text-align: center;
            line-height: 300px;
            color: #fff;
            font-size: 90px;
            overflow: hidden;
        }

        h1 {
            height: 50px;
            line-height: 50px;
            width: 100%;
            color: #fff;
            text-align: center;
            background: -webkit-linear-gradient(left, red 0%, yellow 30%, blue 60%, pink 100%);
        }
    </style>


</head>

<body>
    <h1>电子签名</h1>
    <div id="box">
        <canvas width="1000" height=500 id="mycanvas">浏览器不支持该浏览器</canvas>
    </div>
    <button onclick="getPic()">生成电子签名照片</button>
    <script>

        var mycanvas = document.getElementById("mycanvas");
        var ctx = mycanvas.getContext("2d");


        function Dots(x, y, color, width) {
            // this.beginPath();
            this.lineTo(x, y);
            this.strokeStyle = color;
            this.lineWidth = width;
            this.stroke()
            // this.closePath();
        }
        var box = document.getElementById("box")
        var offsetX = box.offsetLeft;
        var offsetY = box.offsetTop;
        var x = 0;
        var y = 0;
        var touchDown = false;
        box.addEventListener("mousedown", (e) => {
            e = e || window.event;
            x = e.clientX - offsetX;
            y = e.clientY - offsetY;
            ctx.beginPath();
            Dots.call(ctx, x, y, "#ff0000", 4);
            touchDown = true;
        })

        box.addEventListener("mousemove", (e) => {
            e = e || window.event;
            if (touchDown) {
                x = e.clientX - offsetX;
                y = e.clientY - offsetY;
                Dots.call(ctx, x, y, "#ff0000", 4);
            }
        })

        box.addEventListener("mouseup", (e) => {
            touchDown = false;
            ctx.closePath();
        })

        function getPic() {
            var url = mycanvas.toDataURL();
            console.log(url);
            var img = document.createElement("img");
            img.src = url;
            img.width = 400;
            img.height = 200;
            img.border = '1px solid #aaa'
            document.body.appendChild(img);
        }

    </script>
</body>

</html>