<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        .box{width:300px;overflow: hidden;margin: 20px auto;}
        #text{width: 298px;height: 30px;border: 1px solid black;position: relative;}
        #whether{width:30px;height: 30px;position: absolute;top: 0;left:300px;background: red}
        #code{width: 300px;height:300px;background: darkred;position: relative;}
        #code span{position: absolute;width: 20px;height: 20px;color: black;
        text-align: center;line-height: 20px;}
    </style>
</head>
<body>
<div class="box">
    <div id="text"><span id="whether"></span></div>
    <div id="code">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
    </div>

</div>
</body>
<script>
    var list=["武","汉","千","锋","H","5","班"];
    var text=document.getElementById("text");
    var code=document.getElementById("code");
    var btn=document.getElementById("btn");
    var spanlist=document.getElementsByTagName("span");
    var whether=document.getElementById("whether");
    show();
    function show() {
    var str="";
    var newstr="";
    var count=0;
        for (var i = 0; i < 4; i++) {
            var li = list[Math.round(Math.random() * 6)];
            if (str.indexOf(li) == -1) {
                str += li;
            } else {
                i--
            }
        }
        text.innerHTML = str;
        for (var j = 0; j < spanlist.length; j++) {
            var span = spanlist[j];
            span.style.background="white";
            span.innerHTML = str[j];
            span.style.top = Math.round(Math.random() * 280) + "px";
            span.style.left = Math.round(Math.random() * 280) + "px";
            span.onclick = function () {
                this.style.background = "blue";
                newstr += this.innerHTML;
                count++;
                if (count == 4) {
                    if (newstr == str) {
                        alert("验证正确");
                        code.style.display="none";
                    } else {
                        alert("验证失败");
                        show();
                    }
                }
            }
        }
    }
</script>
</html>