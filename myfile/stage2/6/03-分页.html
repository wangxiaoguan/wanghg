<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        #page{width:600px;height: 30px;text-align: center;}
        #page span{float:left; padding:0 5px;margin:0 5px;background:#2a2;font-size:20px;line-height:30px;color:#fff;}
        #page .nextpage,#page .prevpage{background:#003366;color:#fff;}
        #page .content span{width:30px;}
        #page .content .selected{background: #9A0000;}
    </style>
</head>
<body>
<div id="page" class="page">
    <span class="prevpage">上一页</span>
    <div class="content">
        <span class="pageone">1</span>
        <span class="pageone">2</span>
        <span class="pageone">3</span>
        <span class="pageone">4</span>
        <span class="pageone">5</span>
        <span class="pageone">6</span>
        <span class="pageone">7</span>
    </div>
    <span class="nextpage">下一页</span>
</div>
<script>
    function page(ele,json){
        this.ele=document.querySelector(ele);
        this.option={
            allcount:100,
            shownum:5,
            showpage:7,
            pageindex:1,
            fn: function (para) {
                alert(para);
            }
        };
        this.create();
        this.data();
        this.bindEvent();
        this.extend(json);
    }
    page.prototype.extend= function (json) {
        for(var i in json){
            this.option[i]=json[i];
        }
    };
    page.prototype.data= function () {
        var that=this;
        var middle=Math.ceil(this.option.showpage/2);
        that.pagecontent.innerHTML="";
        this.pagecount=Math.ceil(this.option.allcount/this.option.shownum);
        var end=this.pagecount>this.option.showpage?this.option.showpage:this.pagecount;
        var start=1;
        start=this.option.pageindex<middle?start:(this.option.pageindex-middle+1);
        end=this.option.pageindex<middle?end:(this.option.pageindex+middle-1);
        if(end>this.pagecount){
            end=this.pagecount;
            start=this.pagecount-this.option.showpage+1;
        }
        for(var i=start;i<=end;i++){
            var span=document.createElement("span");
            if(i==this.option.pageindex){ span.className="selected";}
            span.innerHTML=i;
            this.pagecontent.appendChild(span);
            span.onclick= function () {
                that.option.pageindex=this.innerHTML*1;
                that.data();
            }
        };
        this.bindEvent();
//        this.option.fn(this.option.pageindex);
    };
    page.prototype.bindEvent= function () {
        var that=this;
        this.prevbtn.style.background="#003366";
        this.prevbtn.onclick= function () {
            that.option.pageindex--;
            that.data();
        };
        this.nextbtn.style.background="#003366";
        this.nextbtn.onclick= function () {
            that.option.pageindex++;
            that.data();
        };
        if(this.option.pageindex==1){
            this.prevbtn.style.background="#999";
            this.prevbtn.onclick=null;
        };
        if(this.option.pageindex==this.pagecount){
            this.nextbtn.style.background="#999";
            this.nextbtn.onclick=null;
        }

    }
    page.prototype.create= function () {
        this.prevbtn=document.createElement("span");
        this.prevbtn.className="prevpage";
        this.prevbtn.innerHTML="上一页";
        this.ele.appendChild(this.prevbtn);

        this.pagecontent=document.createElement("div");
        this.pagecontent.className="content";
        this.ele.appendChild(this.pagecontent);

        this.nextbtn=document.createElement("span");
        this.nextbtn.className="nextpage";
        this.nextbtn.innerHTML="下一页";
        this.ele.appendChild(this.nextbtn);

    }
   var p= new page("#page",{
        allcount:60,
        shownum:5,
        showpage:5,
        pageindex:1,
        fn: function (para) {
            alert(para);
        }
    });

</script>
</body>
</html>