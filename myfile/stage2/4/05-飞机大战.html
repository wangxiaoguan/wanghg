<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{padding: 0;margin: 0;}
        #box{width:400px;height:500px;border:5px solid black;margin:50px 300px;
             position: relative;overflow: hidden;}
        #slider{width:35px;height:50px;position:absolute;left:0;bottom:0;}
        #plane{width:35px;height:50px;}
        .enemy{width:35px;height:50px;position:absolute;top:-50px;}
        .bullet{width:5px;height:15px;position:absolute;top:450px;display:none;}

    </style>
</head>
<body>
<div id="box">
    <div id="slider"><img id="plane" src="images/fj.png"></div>
</div>
</body>
<script>
    var box=document.getElementById("box");
    var slider=document.getElementById("slider");

    var boxleft=box.offsetLeft;
    var boxtop=box.offsetTop;

    var sliderleft=slider.offsetLeft;//滑块的左边距
    var slidertop=slider.offsetTop;

    var sliderwidth=slider.offsetWidth;//滑块的宽度
    var silderheight=slider.offsetHeight;//滑块的高度

    var boxwidth=box.offsetWidth;//box宽度710
    var boxheight=box.offsetHeight;//box高度510
    var moveleftMax=boxwidth-sliderwidth-10;
    var movetopMax=boxheight-silderheight-10;
    var i=0;
    var moveX=20;
    var moveY=30;
    box.onclick=function () {
        document.onmouseover = function () {
            document.onmousemove = function (e) {
                var evt = window.event || e;
                slider.style.left = evt.clientX - boxleft - sliderwidth / 2 + "px";
                slider.style.top = evt.clientY - boxtop - silderheight / 2 + "px";
                if (parseInt(slider.style.left) <= 0) {
                    slider.style.left = 0;
                }
                if (parseInt(slider.style.left) >= moveleftMax) {
                    slider.style.left = moveleftMax + "px";
                }
                if (parseInt(slider.style.top) <= 0) {
                    slider.style.top = 0;
                }
                if (parseInt(slider.style.top) >= movetopMax) {
                    slider.style.top = movetopMax + "px";
                }
                collision();
            }
        }
    }
    document.onkeydown=document.onkeyup=function (e) {
            var evt=window.event||e;
            var key=evt.which||evt.keyCode;
            if (key==37||key==65){slider.style.left=slider.offsetLeft-moveX+"px";}
            if (key==38||key==87){slider.style.top=slider.offsetTop-moveY+"px";}
            if (key==39||key==68){slider.style.left=slider.offsetLeft+moveX+"px";}
            if (key==40||key==83){slider.style.top=slider.offsetTop+moveY+"px";}
            if (parseInt(slider.style.left)<= 0) {slider.style.left = 0;}
            if (parseInt(slider.style.left)>=moveleftMax){slider.style.left=moveleftMax+"px";}
            if (parseInt(slider.style.top)<=0){slider.style.top=0;}
            if (parseInt(slider.style.top)>=movetopMax){slider.style.top=movetopMax+"px";}
            // bullet() ;enemy()};
            collision();}
    function bullet() {
                var valuex=parseInt(slider.style.left)+15+"px";
                var valuey=parseInt(slider.style.top);
                var bulletimg=document.createElement("img");
                bulletimg.className="bullet";
                bulletimg.src="images/zd.png";
                box.appendChild(bulletimg);
                var speed1=100;
                var timer1=null;
                bulletimg.style.display="block";
                bulletimg.style.top=valuey+"px";
                timer1=setInterval(function () {
                    bulletimg.style.top=bulletimg.offsetTop-speed1+"px";
                    bulletimg.style.left=valuex;
                    if (bulletimg.offsetTop<=-15){
                        clearInterval(timer1);
                        bulletimg.parentNode.removeChild(bulletimg);
                    }
                },20)
            }

    function enemy() {
            i++;
            if(i%10==0){
                var enemyleft=Math.round(Math.random()*365)+"px";
                var enemyimg=document.createElement("img");
                enemyimg.className="enemy";
                enemyimg.src="images/dj.png";
                box.appendChild(enemyimg);
                var speed2=15;
                var timer2=null;
                timer2=setInterval(function () {
                    enemyimg.style.top=enemyimg.offsetTop+speed2+"px";
                    enemyimg.style.left=enemyleft;
                    if (enemyimg.offsetTop>=500){
                        clearInterval(timer2);
                        enemyimg.parentNode.removeChild(enemyimg);
                    }
                },50)
            }

        }





    function collision() {
        var valuex=parseInt(slider.style.left)+15+"px";//飞机的X坐标
        var valuey=parseInt(slider.style.top);//飞机的Y坐标
        var bulletimg=document.createElement("img");
        i++;
        if (i%10==0) {
            var enemyimg = document.createElement("img");
            var enemyleft = Math.round(Math.random() * 365) + "px";//敌机的X坐标
            enemyimg.className = "enemy";
            enemyimg.src = "images/dj.png";
        }

        bulletimg.className="bullet";
        bulletimg.src="images/zd.png";

        box.appendChild(bulletimg);
        box.appendChild(enemyimg);
        var speed1=25;
        var timer=null;
        var speed2=25;
        bulletimg.style.display="block";
        bulletimg.style.top=valuey+"px";
        timer=setInterval(function () {
            bulletimg.style.top = bulletimg.offsetTop - speed1 + "px";
            bulletimg.style.left = valuex;
            enemyimg.style.top = enemyimg.offsetTop + speed2 + "px";
            enemyimg.style.left = enemyleft;
            if (bulletimg.offsetLeft <= enemyimg.offsetLeft && enemyimg.offsetLeft <= bulletimg.offsetLeft + bulletimg.offsetWidth) {
                if (enemyimg.offsetTop - bulletimg.offsetTop <= bulletimg.offsetHeight) {
                    clearInterval(timer);
                    bulletimg.style.display = "none";
                    enemyimg.style.display = "none";
                    enemyimg.parentNode.removeChild(enemyimg);
                    bulletimg.parentNode.removeChild(bulletimg);
                }
            } else {
                if (bulletimg.offsetTop <= -15) {
                    clearInterval(timer);
                    enemyimg.parentNode.removeChild(enemyimg);
                    bulletimg.parentNode.removeChild(bulletimg);
                }
            }
        },50);

    }
</script>
</html>