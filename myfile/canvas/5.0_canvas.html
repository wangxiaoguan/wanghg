<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>canvas</title>
    <style>
        *{
            padding: 0;
            margin:0;
        }
    h1{
        height:50px;
        line-height: 50px;
        width:100%;
        color:#fff;
        text-align: center;
        background: -webkit-linear-gradient(left,red 0% ,yellow 30% ,blue 60% ,pink 100% );
    }

              canvas{
                display: block;
                margin:50px auto;
                border:1px solid darkgoldenrod;
            }
    
    </style>
</head>
<body>
    <h1>wh1803 Daydayup</h1>
    <canvas id="mycanvas" width=800 height=400 >浏览器不支持该浏览器</canvas>
    <canvas id="mycanvas1" width=800 height=400 >浏览器不支持该浏览器</canvas>

    <script>
    

    var mycanvas = document.getElementById("mycanvas")

    var c = mycanvas.getContext("2d");
    // createLinearGradient(xStart,yStart,xEnd,yEnd)
    // xstart:渐变开始点x坐标 
    // ystart:渐变开始点y坐标
    // xEnd:渐变结束点x坐标 
    // yEnd:渐变结束点y坐标
    // lg.addColorStop(offset,color)     {0% red,20%green}
    // offset:设定的颜色离渐变结束点的偏移量(0~1) 
    // color:绘制时要使用的颜色

    var lg = c.createLinearGradient(0,0,0,400);
    lg.addColorStop(0,'red');
    lg.addColorStop(0.3,"green");
    lg.addColorStop(0.7,"pink");
    lg.addColorStop(1,"orange")

    c.beginPath();
    // c.fillStyle = "#123456"
    c.fillStyle = "#fff";
    c.fillRect(0,0,800,400);
    c.closePath();




    function rect(x,y,w,h,color){
        this.beginPath();
        // this.clearRect(0,0,800,400);
        this.fillStyle = color;
        this.fillRect(x,y,w,h);
        this.closePath();
    }

    var width = 40;
    var gap = 10;
    var number = mycanvas.width/(width+gap);
    console.log(number);

    function moveRect(x,y,width,height,color){
      var t = 0;
      var timer =   setInterval(()=>{
            t-=4;
            if(t>height){
                rect.call(c,x,y,width,t,color);
            }else{
                clearInterval(timer)
            }
           
        },20)
    }

    for(let i=0;i<number;i++){
        var randNum = Math.round(mycanvas.height*Math.random())
        console.log(i);
        // rect.call(c,(width+gap)*i,400,width,-randNum,lg);
        moveRect((width+gap)*i,400,width,-randNum,lg)
    }






    function arc(x,y,r,sa,ea,color,width){
        this.beginPath();
        this.clearRect(0,0,800,400);
        this.arc(x,y,r,sa,ea,false);
        this.lineWidth = width;
        this.strokeStyle = "#123456";
        this.stroke();
        this.fillStyle = color;
        this.fill();
        this.closePath();
    }

    


    // rect(50,50,100,100,"#fff")   call 改变this 指向  直接执行 
    // rect.call(c,50,50,70,70,"#fff");
    // clearRect(0,0,800,400);  清除画布
;
    var num = 0;
    var P = Math.PI;
    // setInterval(()=>{
    //     num+=2;
    //     // rect.call(c,num,50,70,70,lg);
    //     arc.apply(c,[num,50,30,0,P*2,lg,10])
    // },20)

    var speedX = 4;
    var speedY = 5;
    var raidus = 30;
    var x0 = 50;
    var y0 = 50;


    setInterval(()=>{
        
        if(x0<raidus||x0>mycanvas.width-raidus){
            speedX*=-1;
        }

        if(y0<raidus||y0>mycanvas.height-raidus){
            speedY*=-1;
        }

        x0+=speedX;
        y0+=speedY;
        // arc.apply(c,[x0,y0,raidus,0,P*2,lg,10])
        // Dots.call(c,x0,y0,lg);
    },1)


    function Dots(x,y,color){
        // this.beginPath();
        this.lineTo(x,y);
        this.strokeStyle = color;
        this.stroke();
        // this.closePath();
    }

















    var mycanvas1 = document.getElementById('mycanvas1')
    var r = mycanvas1.getContext("2d");

    // rg=context.createRadialGradient(xStart,yStart,radiusStart,xEnd,yEnd,radiusEnd)	
    // xStart:发散开始圆心x坐标	
    // yStart:发散开始圆心y坐标	
    // radiusStart:发散开始圆的半径	
    // xEnd:发散结束圆心的x坐标	
    // yEnd:发散结束圆心的y坐标	
    // radiusEnd:发散结束圆的半径	
    // 径向渐变颜色	
    // rg.addColorStop(offset,color)	
    // offset:设定的颜色离渐变结束点的偏移量(0~1)	
    // color:绘制时要使用的颜色

    var rg = r.createRadialGradient(400,200,100,400,200,150);
    rg.addColorStop(0,"red");
    rg.addColorStop(0.3,"yellow");
    rg.addColorStop(0.6,"blue");
    rg.addColorStop(1,"green");

    r.beginPath();
    r.fillStyle = rg;
    r.fillRect(0,0,800,400);
    r.closePath();




    </script>
</body>
</html>