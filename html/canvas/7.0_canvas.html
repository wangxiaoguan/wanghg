<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>刮刮乐</title>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
        canvas{
            display: block;
            /* margin:50px auto; */
            /* border:1px solid darkgoldenrod; */
            position: absolute;
            top:0;
            left:0;
            /* width:100%;
            height:100%; */
        }
         #box{
            width:100%;
            height:300px;
            background:orange;
            position: relative;
            text-align: center;
            line-height: 300px;
            color:#fff;
            font-size:90px;
            overflow: hidden;
        }
        h1{
        height:50px;
        line-height: 50px;
        width:100%;
        color:#fff;
        text-align: center;
        background: -webkit-linear-gradient(left,red 0% ,yellow 30% ,blue 60% ,pink 100% );
    }

    </style>

 
</head>
<body>
     <h1>刮刮乐</h1>
    <div id="box">
        <span id="txt"> </span>
        <canvas width="1000" height=300 id="mycanvas" >浏览器不支持该浏览器</canvas>

    </div>
   
    <script>
        
        var mycanvas = document.getElementById("mycanvas");
        var ctx = mycanvas.getContext("2d");
        
        var text = ["谢谢惠顾","一等奖","二等奖","三等奖"];

        function getRand(max,min){
            return Math.floor(min+(max-min)*Math.random())
        }
        
        document.getElementById("txt").innerHTML = text[getRand(text.length,0)]
        

        ctx.beginPath();
        ctx.fillStyle = "#ccc";
        ctx.fillRect(0,0,mycanvas.width,mycanvas.height);
        ctx.closePath();
        
        var P = Math.PI;

        function Arc(x,y,r,color,type){
            type = type || "source-over";
            this.beginPath();
            this.arc(x,y,r,0,P*2,false);
            this.fillStyle = color;
            this.globalCompositeOperation = type;
            this.fill();
            this.closePath();
        }
        
        var offsetX = document.getElementById("box").offsetLeft;
        var offsetY = document.getElementById("box").offsetTop;
        var x = 0;
        var y = 0;
        console.log(offsetY);
        var touchdown = false;
        document.addEventListener("touchstart",(e)=>{
            e = e || window.event;
            
            x = e.touches[0].clientX - offsetX;
            y = e.touches[0].clientY - offsetY;
            console.log(x,y);
            Arc.call(ctx,x,y,24,"#123456","destination-out");
            touchdown = true;
        })
        
        document.addEventListener("touchmove",(e)=>{
            e = e || window.event;
            if(touchdown){            
                x = e.touches[0].clientX - offsetX;
                y = e.touches[0].clientY - offsetY;
                Arc.call(ctx,x,y,24,"#123456","destination-out");
            }
        })
        
        document.addEventListener("touchend",()=>{
            touchdown = false;
        })
    </script>
</body>
</html>