<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        *{padding:0;margin:0;}
        input{width:210px;margin-right:10px;}
        .data{width:210px;border:1px solid #000000;margin-top:10px;display:none;position:absolute;}
        .data > .header{display:flex;}
        .data > .mon{text-align:center;}
        .data >.header > span{padding: 0 10px;}
        .prev,.next{cursor: pointer;}
        .year{flex: 1;text-align: center;}
        .week{width:210px;height:20px;background: #ccc;}
        .week span{float:left;width:30px;height:20px;line-height:20px;text-align:center;}
        .date{overflow: hidden;list-style: none;}
        .date li{float:left;width:30px;height:20px;line-height:20px;text-align: center;cursor: pointer;}
        .date li:hover{background:#9A0000;color:#fff;}
        .active{color: red;}
    </style>
</head>
<body>
<input id="startdate"><input id="enddate"><input id="parsedate">
<div class="data">
    <div class="header"> <span class="prev">上</span>
        <span class="year">2018</span>
        <span class="mon">一月</span>
        <span class="next">下</span>
    </div>
    <div class="week">
        <span>日</span>
        <span>一</span>
        <span>二</span>
        <span>三</span>
        <span>四</span>
        <span>五</span>
        <span>六</span>
    </div>
    <ul class="date">
    </ul>
</div>
</body>
<script>

        var dat = new Date(); //当前时间
        var nianD = dat.getFullYear();//当前年份
        var yueD = dat.getMonth(); //当前月
        var tianD = dat.getDate(); //当前天 这保存的年月日 是为了 当到达当前日期 有对比

        add(); //进入页面第一次渲染

        function add(){
            document.getElementsByClassName('date')[0].innerHTML = "";
            var nian = dat.getFullYear();//当前年份
            var yue = dat.getMonth(); //当前月
            var tian = dat.getDate(); //当前天
            var arr=["1","2","3","4","5","6","7","8","9","10","11","12"];
            document.getElementsByClassName('year')[0].innerText = nian;
            document.getElementsByClassName('mon')[0].innerText = arr[yue];
            var setDat = new Date(nian,yue + 1,1 - 1); //把时间设为下个月的1号 然后天数减去1 就可以得到 当前月的最后一天;
            var setTian = setDat.getDate(); //获取 当前月最后一天
            var setZhou = new Date(nian,yue,1).getDay(); //获取当前月第一天 是 周几

            for(var i=0;i<setZhou ;i++){//渲染空白 与 星期 对应上
                var li=document.createElement('li');
                document.getElementsByClassName('date')[0].appendChild(li);
            }

            for(var i=1;i<=setTian;i++){//利用获取到的当月最后一天 把 前边的 天数 都循环 出来
                var li=document.createElement('li');
                li.innerText = i;
                if(nian == nianD && yue == yueD && i == tianD){
                    li.className = "active";
                }else{
                    li.className = "hover";
                }

                document.getElementsByClassName('date')[0].appendChild(li);
            }

        }
        document.getElementsByClassName("next")[0].onclick = function(){
            dat.setMonth(dat.getMonth() + 1); //当点击下一个月时 对当前月进行加1;
            add(); //重新执行渲染 获取去 改变后的 年月日 进行渲染;
        };
        document.getElementsByClassName("prev")[0].onclick = function(){
            dat.setMonth(dat.getMonth() - 1); //与下一月 同理
            add();
        };

    var startdate=document.getElementById("startdate");
    var enddate=document.getElementById("enddate");
    var parsedate=document.getElementById("parsedate");
    var ele= document.getElementsByClassName("data")[0];
        startdate.onclick= function () {
            var ele1=ele.cloneNode(true);
            document.body.appendChild(ele1)
            ele1.style.left="2px";
            document.getElementsByClassName("data")[0].style.display="block";

        };
        enddate.onclick= function () {
            var ele2=ele.cloneNode(true);
            document.body.appendChild(ele2)
            ele2.style.left="225px";
            document.getElementsByClassName("data")[0].style.display="block";
        };
        parsedate.onclick= function () {
            var ele3=ele.cloneNode(true);
            document.body.appendChild(ele3);
            ele3.style.left="449px";
            document.getElementsByClassName("data")[0].style.display="block";
        };
    var daylilist=document.getElementsByTagName("li");

    for (var i = 0; i < daylilist.length; i++) {
        daylilist[i].onclick = function () {
            let year = document.getElementsByClassName("year")[0].innerHTML;
            let mon = document.getElementsByClassName("mon")[0].innerHTML;
            let day = this.innerHTML;
            var result = year + "-" + mon + "-" + day;
            var marginleft=document.getElementsByClassName("data")[0].offsetLeft;
            if(marginleft<225){
                startdate.value=result;
            }else if(marginleft<449) {
                enddate.value = result;
            }else if(marginleft>=449){parsedate.value=result;}
        }
    }


</script>
</html>