<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{margin:0;padding:0;list-style:none;}
    </style>
</head>
<body>
<input id="text" placeholder="请输入关键字">
<span id="msg"></span>
</body>
<script>

    var text=document.getElementById("text");
    var msg=document.getElementById("msg");
    // text.onchange=text.onblur=function () {
    //     var value = text.value;
    //     var req = new XMLHttpRequest();//建立请求的通道
    //     //var req=new ActiveXObject("Microsoft.XMLHTTP");
    //     req.open("get", "data/test2.js", true);//设置请求的方式和地址,true异步false同步
    //     req.send();//发送请求
    //     req.onreadystatechange = function () {
    //         if (req.readyState == 4 && req.status == 200) {
    //             var result = req.responseText;
    //             var list = JSON.parse(result);
    //             for (var i = 0; i < list.length; i++) {
    //                 var item = list[i];
    //                 if (item == value) {
    //                     msg.innerHTML = "该用户已存在";
    //                     return false;
    //                 }
    //             }
    //             msg.innerHTML = "此用户名可以使用";
    //         }
    //     }
    // }
    text.onchange=text.onblur=function () {
        var value = text.value;
        var req = new XMLHttpRequest();//建立请求的通道
        //var req=new ActiveXObject("Microsoft.XMLHTTP");
        req.open("get", "data/test2.js", true);//设置请求的方式和地址,true异步false同步
        req.send();//发送请求
        req.onreadystatechange = function () {
            if (req.readyState == 4 && req.status == 200) {
                var result = req.responseText;
                var list = JSON.parse(result);
                var newlist=list.filter(function (item) {
                    return item==value;
                });
                if(newlist[0]==value){
                    msg.innerHTML = "此用户名已存在";return false;}
                else {msg.innerHTML = "此用户名可以使用";}
            }
        }
    }


</script>
</html>