<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        *{padding: 0;margin: 0;list-style: none;}
        #box{width:100%;overflow: hidden;margin:20px }
        #province span{display:inline-block;padding:0 5px;color:green;}
        #province span:hover{background: fuchsia;}
        #city span{display:inline-block;padding:0 5px;color:red;}
        #city span:hover{background:orange;}
        #area span{display:inline-block;padding:0 5px;color:sienna;}
        #area span:hover{background:blue;}
    </style>
</head>
<body>
<div id="box">
    <div id="province"></div>
    <div id="city"></div>
    <div id="area"></div>
</div>
</body>
<script>
    var province=document.getElementById("province");
    var city=document.getElementById("city");
    var area=document.getElementById("area");

    var req=new XMLHttpRequest();
    req.open("get","http://api.yytianqi.com/citylist/id/2",true);
    req.send();
    var previncelist;
    var spancitylist;
    req.onreadystatechange=function() {
        if (req.readyState == 4 && req.status == 200) {
            var result = req.responseText;
            var list = JSON.parse(result);
            previncelist = list.list;
            var html = "";
            previncelist.map(function (item) {
                html += "<span>" + item.name + "</span>";
            });
            province.innerHTML= html;//省份城市
            var spanlist = province.getElementsByTagName("span");
            for (var i = 0; i < spanlist.length; i++) {
                (function(i){
                    spanlist[i].onmouseover = function() {
                        var spancity = previncelist.filter(function (item) {
                            return spanlist[i].innerHTML == item.name
                        });
                        var html = "";
                        spancitylist = spancity[0].list;
                        spancitylist.map(function (item) {
                            html+=`<span onmouseover="show('${item.city_id}')">${item.name}</span>`;
                        });
                        city.innerHTML= html;//市级城市
                    }
                })(i);
            }
        }
    };
    function show(city_id) {
        var arealist=spancitylist.filter(function (item) {
            return  city_id==item.city_id
        })[0];
        var html="";
        if(arealist.list){
            arealist.list.map(function (areaitem) {
                html += "<span>" + areaitem.name + "</span>";
            });
        }
        area.innerHTML= html;//区级城市/县级
    }
</script>
</html>