<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>qiqi</title>


</head>
<style type="text/css">

    #canvas{
        position:absolute;
        z-index:1;
        background-image:url(../image/stars.png);
    }

</style>
<body >
<div style = "width:550px ;margin:0 auto;">
    <canvas id="canvas" width="550" height="550" >
        not support!
    </canvas>

</div>
<script >

    var stick1 = {
        x1: 0,
        y1: 200,
        width: 15,
        height: 70
    };

    var stick2 = {
        x2: 535,
        y2: 200,
        width: 15,
        height: 70
    };

    var ball = {
        x3: 0,
        y3: 0,
        radius: 10,
        ballX: 50,
        ballY: 60,
        vx: 5,
        vy: 9,
        out: false
    };



    window.onload = function() {
        var can = document.getElementById('canvas'); // 绘图区域
        var ctx = can.getContext('2d');
        ctx.fillStyle = "#FFF200";

        function updateCanvas() {
            ctx.clearRect(0, 0, can.width, can.height);
            ctx.fillRect(stick1.x1, stick1.y1, stick1.width, stick1.height);
            ctx.fillRect(stick2.x2, stick2.y2, stick2.width, stick2.height);
            ctx.beginPath();
            ctx.arc(ball.ballX, ball.ballY, ball.radius, 0, Math.PI * 2, false);
            ctx.fill();
            ctx.strokeRect(ball.x3, ball.y3, can.width, can.height);
        }

        document.onkeydown = function(ev) {
            var ev = ev || window.event;
            switch (ev.keyCode) {
                case 38:
                    stick2.y2 = stick2.y2 - 20;
                    break;
                case 40:
                    stick2.y2 = stick2.y2 + 20;
                    break;
                case 87:
                    stick1.y1 = stick1.y1 - 20;
                    break;
                case 83:
                    stick1.y1 = stick1.y1 + 20;
                    break;
            }

            //第一个if定义的是向上，第二个是向下
            if (stick1.y1 < 0) {
                stick1.y1 = 0;
            }
            if (stick1.y1 > can.height-stick1.height) {
                stick1.y1 = can.height-stick1.height;
            }
            if (stick2.y2 < 0) {
                stick2.y2 = 0;
            }
            if (stick2.y2 > can.height-stick2.height) {
                stick2.y2 = can.height-stick2.height;
            }
            updateCanvas();
        };

        function moveBall() {
            moveDirect();
            updateCanvas();
            if ((ball.ballX - ball.radius > can.width) || (ball.ballX + ball.radius <0)) {
                clearInterval(timer);
                alert("over");
            }
        };


        function moveDirect() {
            ball.ballX += ball.vx;
            ball.ballY += ball.vy;
            if (ball.ballY + ball.radius >= can.height) {
                ball.ballY = can.height - ball.radius;
                ball.vy = -ball.vy;
            }
            if (ball.ballY - ball.radius <=0) {
                ball.ballY = ball.radius;
                ball.vy = -ball.vy;
            }

            if (!ball.out && ball.ballX - ball.radius < stick1.x1 + stick1.width) {
                if ((ball.ballY + ball.radius > stick1.y1) && (ball.ballY - ball.radius < stick1.y1 + stick1.height)) {
                    ball.ballX = stick1.x1 + stick1.width + ball.radius;
                    ball.vx = -ball.vx;
                } else {
                    ball.out = true;
                }
            }

            if (!ball.out && ball.ballX + ball.radius > stick2.x2) {
                if ((ball.ballY + ball.radius > stick2.y2) && (ball.ballY - ball.radius < stick2.y2 + stick2.height)) {
                    ball.ballX = stick2.x2 - ball.radius;
                    ball.vx = -ball.vx;
                } else {
                    ball.out = true;
                }
            }

        }

        updateCanvas();
        var timer = setInterval(moveBall, 35);

    };

</script>
</body>
</html>