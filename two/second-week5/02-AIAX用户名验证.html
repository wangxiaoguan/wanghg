<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{margin:0;padding:0;list-style:none;}
    </style>
</head>
<body>
<input id="name" placeholder="请输入用户名"><span id="name_span"></span><br/>
<input id="pass" placeholder="请输入密码"><span id="pass_span"></span><br/>
<button id="btn">登录</button>
</body>
<script>
    var btn=document.getElementById("btn");
    var name1=document.getElementById("name");
    var pass1=document.getElementById("pass");
    var name_span=document.getElementById("name_span");
    var pass_span=document.getElementById("pass_span");


    btn.onclick=function () {
        name_span.innerHTML="";
        pass_span.innerHTML="";
        var username1 = name1.value;
        var userpass1 = pass1.value;
        var req = new XMLHttpRequest();//建立请求的通道
        //var req=new ActiveXObject("Microsoft.XMLHTTP");
        req.open("get", "data/name.json", true);//设置请求的方式和地址,true异步false同步
        req.send();//发送请求
        req.onreadystatechange = function () {
            if (req.readyState == 4 && req.status == 200) {
                var result = req.responseText;
                var list = JSON.parse(result);
                for (var i=0;i<list.length;i++){
                    var obj=list[i];
                    var objname=obj.username;
                    var objpass=obj.userpass;
                    if (username1==objname){
                        if (userpass1==objpass){alert("登录成功");}
                        else {pass_span.innerHTML="密码错误"}
                        return false
                    }
                }
                name_span.innerHTML="用户名不存在";
            }
        }
    }
    // text.onchange=text.onblur=function () {
    //     var value = text.value;
    //     var req = new XMLHttpRequest();//建立请求的通道
    //     //var req=new ActiveXObject("Microsoft.XMLHTTP");
    //     req.open("get", "data/test2.js", true);//设置请求的方式和地址,true异步false同步
    //     req.send();//发送请求
    //     req.onreadystatechange = function () {
    //         if (req.readyState == 4 && req.status == 200) {
    //             var result = req.responseText;
    //             var list = JSON.parse(result);
    //             var newlist=list.filter(function (item) {
    //                 return item==value;
    //             });
    //             if(newlist[0]==value){
    //                 msg.innerHTML = "此用户名已存在";return false;}
    //             else {msg.innerHTML = "此用户名可以使用";}
    //         }
    //     }
    // }


</script>
</html>