<!doctype html>
<html>
	<head>
		<title>画板</title>
		<meta charset="utf-8">
		
		<style>
			*{margin:0;padding:0;}
			body,html{width:100%;height:100%;font-family:"微软雅黑";background:#fff;}
			.box{
				width:740px;
				height:500px;
				margin:0 auto;
			}
			canvas{
				background:#fff;
				display:block;
				float:left;
				cursor:crosshair;
				border: 1px solid #000;
			}
			.wrap{
				width:100px;
				float:right;
				border:1px solid #00ccff;
				border-radius:5px;
			}
			.wrap p{
				width:80px;
				float:left;
				margin:5px;
				text-align:center;
			}
			ul{
				list-style-type:none;
				width:100%;
				float:left;
			}
			
			ul li{
				width:20px;
				height:20px;
				background:red;
				float:left;
				margin:3px;
				cursor:pointer;
				border:2px solid #fff;
				
			}
			ul li:hover{
				border:2px solid red;
			}
			.right{
				float:right;
			}
			.hardness{
				width:120px;
				border:1px solid #6600cc;
				margin-left:2px;
				zoom:1;
				border-radius: 6px;
				overflow:auto;
			}
			.hardness p{
				margin:5px 15px;
				text-align:center;
			}
			 span{
				float:left;
				width:1.4rem;
				height: 1.4rem;
				margin:2px 6px;
				text-align:center;
				border:2px solid #fff;
				background:#33ccff;
				border-radius:50%;
				cursor:pointer;
				font-size: 0.8rem;
				line-height: 1.4rem;
			}
			.hardness span:hover{
				background:#ffff00;
				border-color:#ff0099;
			}
			.yd{
				border:2px solid red;
			}
			#btn{
				width:100px;
				margin:10px;
				background:#ff00cc;
				outline:none;
				border:5px solid #aaaaaa;
				height:70px;
				border-radius:6px;
				cursor:pointer;
				font-size:20px;
				font-weight:700;
				color:#33ff00;
			}
			#btn:hover{
				background:#a7a7a7;
				border-color:#ffff00;
				color:#fff;
			}
		</style>
		
	</head>
	<body>
	<div class="box">
		<canvas width="500" height="500" id="can">
			你的浏览器不支持canvas便签，请你更换浏览器！！
		</canvas>
		<div class="right">
			<div class="hardness">
				<p>画笔宽度</p>
				<div id="hardness"></div>
			</div>
			<button id="btn">清除画板</button>
		</div>
		<div class="wrap">
			<p>画笔颜色</p>
			<ul id="ul">
			</ul>
			<div style="clear:both"></div>
		</div>
		
	</div>

		<script>
			var can = document.getElementById("can");
			var cxt = can.getContext("2d");
			var ul = document.getElementById("ul");
			var har = document.getElementById("hardness");
			var btn = document.getElementById("btn");
			//选择颜色
			for(var i = 0;i<45;i++){
				var li = document.createElement("li");
				li.style.cssText = "background:"+color()+";"; 
				ul.appendChild(li);
			}
			for(var i=0;i<ul.children.length;i++){
				ul.children[i].onclick = function(){
					for(var j=0;j<ul.children.length;j++){
						ul.children[j].className = "";
					}
					this.className = "yd";
					var col = this.style.background;
					cxt.strokeStyle =col;
				}
			}
			//选取笔画硬度
			for(var i=1;i<=36;i++){
				var span = document.createElement("span");
				span.innerHTML += i;
				har.appendChild(span);
			}
			var num1;
			for(var i=0;i<har.children.length;i++){
				har.children[i].index = i;
				har.children[i].onclick = function(){
					for(var j=0;j<har.children.length;j++){
						har.children[j].className = "";
					}
					this.className = "yd";
					var mun = this.innerHTML;
					cxt.lineWidth  = mun;
				}
			}
			
			can.onmousedown = function(ev){
				ev = ev||window.event;
				var x = ev.pageX - can.offsetLeft;
				var y = ev.pageY - can.offsetTop;
				cxt.beginPath();
				cxt.moveTo( x , y );
				document.onmousemove = function(ev){
					ev = ev || window.event;
					var x = ev.pageX - can.offsetLeft;
					var y = ev.pageY - can.offsetTop;
					cxt.lineTo( x , y );
					
					cxt.stroke();
				}
			}
			document.onmouseup = function(){
				document.onmousemove = null;
				//document.onmouseup = null;

			}
			//清除画板
			btn.onclick = function(){
				cxt.clearRect(0,0,500,500);
				for(var j=0;j<ul.children.length;j++){
					ul.children[j].className = "";
				}
				for(var j=0;j<har.children.length;j++){
					har.children[j].className = "";
				}
				cxt.strokeStyle ="#000";
				cxt.lineWidth = 1;
			}

			//颜色
			function color(){
				return "#" + (function(color){
					return new Array(7 - color.length).join("0")+ color;
				})((Math.random()*0x1000000<<0).toString(16))
			}
		
		</script>
	</body>
</html>