<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

</body>
<script>

//compose内的函数执行顺序为从右向左(<——)，
// 即最右边的函数（最后一个参数）最先执行，
// 执行完的结果作为参数传递给前一个函数（包裹它的函数），一直到整个函数执行完毕，
// return一个函数，所以compose内部实现的原理类似多米诺骨牌，层层递进的。

//pipe内的函数执行顺序为从左向右(——>)，
// 即第一个参数（函数）执行完毕，
// 将结果吐出来作为参数传递给第二个函数，
// 直到pipe所有参数作为函数都执行完毕，
// return出一个函数，才算执行完成。

var one = function (name) { return '1' + name }
var two = function (statement) { return '2' + statement }
var three = function (str) { return '3' + str }

var welcome = compose(one, two, three)

var welcome2 = pipe(one, two, three)

console.log(welcome('0')) //1230
console.log(welcome2('0')) //3210


function compose(){
    var args = [].slice.call(arguments);
	return function(initArg){
        var result = initArg;
		for(var i = args.length -1; i >=0; i--){
			result = args[i](result);
        }
		return result;
	}
}

function pipe(...parmas){
    return function(s){
        let r = s;
        for(var j = 0;j<parmas.length;j++){
            r = parmas[j](r)
        }
        return r
    }
}
</script>
</html>